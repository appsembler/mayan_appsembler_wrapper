#Required replacements... ::
#  name -- app name chosen by the user
#  project_root -- usually the name when you git clone the project, 
#                  but needs to be the name of what you add to the python path

name: mayan

mem: 64M

instances: 1
 
framework:
    type: python
    runtime: python27
    
env:
    DJANGO_SETTINGS_MODULE: mayan.appsembler_settings
    PYTHONPATH: /app/app:/app/app/mayan
  
hooks:
    pre-staging:
        - sudo apt-get -y update
        - sudo apt-get -y install git-core tesseract-ocr unpaper ghostscript libmysqlclient-dev graphicsmagick

    post-staging:
        - pip install --user -r requirements.pip
        - python mayan/manage.py syncdb --noinput
        - python mayan/manage.py migrate --noinput
        - python mayan/manage.py collectstatic -l --noinput
       
services:
    # TODO: make this conditional, so there's also support for PostgreSQL, Redis, Mongo, etc.
    mysql: mysql-mayan
  
ignores: 
  - .git
  - .pyc
